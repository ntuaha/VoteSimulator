<!doctype html>
<html ng-app="voteSimulator">
  <head>
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular.min.js"></script>
  <script src="./js/lab.js"></script>
  </head>
  <body vote-simulator ng-controller="VoteSimulator as sim ">
  <!--<body vote-simulator>-->
  <div class="container-flow">
    <h3>選舉模擬器</h3>
    <div>
      <table class="table">
      <thead>
        <tr>
          <td>類別</td>
          <td ng-repeat="(key,value) in pops" >{{key}}</td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>全體人數</td>
          <td ng-repeat="(key,pop) in pops"><input type="text"  ng-model="pop" ng-change="setPop(key,pop)"/></td>
        </tr>
        <tr>
          <td>投票比例</td>
          <td ng-repeat="(key,vote_rate) in vote_rates"><input ng-model="vote_rate" ng-change="setVoteRate(key,vote_rate)"/></td>
        </tr>

        <tr>
          <td>最大票數</td>
          <td ng-repeat="(key,pop) in pops" >{{pop*vote_rates[key]|number:0}}</td>
        </tr>
        <!-- 各候選人 -->
        <tr ng-repeat = "support in supports">
          <td>
            <div>{{support.name}}</div>
            <div>預估得票數</div>
          </td>
          <td ng-repeat="(key,r) in support.rate" >
            <div><input ng-model="r" ng-change="setSupportRate(support,key,r)"/></div>
            <div>{{r*vote_rates[key]*pops[key]|number:0}}</div>
          </td>
        </tr>
      </tbody>
      </table>
    </div>
  </div>
  </body>
</html>
